import{u as y,_ as x,s as f}from"./client-store-BFZhlbxL.js";import{s as i,a as N}from"./column.esm-RawIu7xn.js";import{p as S,z as w,q as _,A as T,e as V,v as a,S as $,u as z,C as I,r as M,o as A,d,j as e,x as n,y as l,t as v}from"./index-DgxbqkdL.js";import"./baseicon.esm-CD9m_F5y.js";import"./index.esm-tCe-2n0D.js";import"./index.esm-CGqsk85-.js";const D={class:"container mx-auto"},U={class:"card"},B={class:"flex justify-end"},F={class:"relative"},L=d("i",{class:"pi pi-search absolute top-2/4 -mt-2 left-3 text-surface-400 dark:text-surface-600"},null,-1),E=d("h2",null,"Loading...",-1),J=S({__name:"ClientList",setup(K){const u=y(),c=z();u.fetchClients();const h=w(()=>u.items),C=_(!1),m=_(),r=_({global:{value:null,matchMode:I.CONTAINS}});T(m,o=>{c.push({path:"client-list/"+o.id})});const b=()=>{c.push({name:"new-client"})},k=o=>{c.push({path:"client-list/"+o+"/edit"})},g=async o=>{if(!confirm("Da li ste sigurni?"))return;const p=await u.removeClient(o);alert(p?"Uspesno izbrisan klijent":"Nesto nije uredu, pokusajte kasnije")};return(o,s)=>{const p=M("InputText");return A(),V($,null,{fallback:a(()=>[E]),default:a(()=>[d("div",D,[e(x,null,{default:a(()=>[n("Klijenti")]),_:1}),d("div",U,[e(l(f),{onClick:s[0]||(s[0]=t=>b())},{default:a(()=>[n("Dodaj klijenta")]),_:1}),e(l(N),{filters:r.value,"onUpdate:filters":s[2]||(s[2]=t=>r.value=t),selection:m.value,"onUpdate:selection":s[3]||(s[3]=t=>m.value=t),value:h.value,paginator:"",rows:10,dataKey:"id",loading:C.value,globalFilterFields:["name","city","address"],class:"mt-4",selectionMode:"single"},{header:a(()=>[d("div",B,[d("span",F,[L,e(p,{modelValue:r.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.global.value=t),placeholder:"Pretraži",class:"pl-10 font-normal"},null,8,["modelValue"])])])]),empty:a(()=>[n(" Ne postoji traženi klijent. ")]),loading:a(()=>[n(" Pretražujemo, molim sačekajte... ")]),default:a(()=>[e(l(i),{field:"name",header:"Rb."},{body:a(t=>[n(v(t.index+1),1)]),_:1}),e(l(i),{field:"name",header:"Naziv"}),e(l(i),{field:"city",header:"Mesto"},{body:a(t=>[n(v(t.data.city),1)]),_:1}),e(l(i),{field:"address",header:"Adresa"}),e(l(i),{field:"email",header:"Email"}),e(l(i),{field:"phone",header:"Telefon"}),e(l(i),{field:"phone2",header:"Telefon 2"}),e(l(i),{header:""},{body:a(t=>[e(l(f),{onClick:j=>k(t.data.id),label:"Submit",class:"mr-3"},{default:a(()=>[n("Izmeni")]),_:2},1032,["onClick"]),e(l(f),{onClick:j=>g(t.data.id),label:"Submit",severity:"danger"},{default:a(()=>[n("Izbriši")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["filters","selection","value","loading"])])])]),_:1})}}});export{J as default};
